<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<title>My first three.js app</title>
	<style>
		body {
			margin: 0;
		}

		.slidecontainer {
			width: 100%;
		}
	</style>
</head>

<body>
	<script type="x-shader/x-vertex" id="vertexshader">

			varying vec2 vUv;

			void main() {

				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}

		</script>

	<script type="x-shader/x-fragment" id="fragmentshader">

			varying vec2 vUv;
			uniform sampler2D tDiffuse;
			uniform float u_TextureGridMode;
			uniform float u_TextureColorMode;

			const vec4 plainColor = vec4(1.0);

			// function prototypes
			vec4 calcGridColor(vec2 p, vec4 defaultColor);

			void main() {
				vec4 colTexture =  texture2D(tDiffuse, vUv);
				colTexture = mix(plainColor, colTexture, u_TextureColorMode);
				vec4 gridTexture = calcGridColor(vUv, colTexture);

				vec4 diffuse = mix(
					colTexture,
					gridTexture,
					u_TextureGridMode
				);

				gl_FragColor = diffuse;
			}

			vec4 calcGridColor(vec2 p, vec4 defaultColor)
			{
				const float nCells = 30.0;
				vec2 q = fract(p * nCells);
				if (q.x < 0.1) return vec4(0.8, 0.0, 0.0, 1.0);
				if (q.y < 0.1) return vec4(0.0, 0.0, 0.5, 1.0);
				return defaultColor;
			}

		</script>

	<select name="mesh" id="meshSelect">
		<option value="BakerHouse/Models/Baker_house.fbx">House</option>
		<option value="_Wheel_195_50R13x10_OBJ/wheel.obj">Wheel</option>
		<option value="BakerHouse/Models/Barrel.FBX">Barrel</option>
		<option value="SpaceRobotKyle/Models/KyleRobot.fbx">Robot</option>
		<option value="Sci_Fi_Gun_Light/_models/GunHeavy.fbx">Gun</option>
		<option value="simpleMeshes/cubeCross.obj">Cube</option>
		<option value="simpleMeshes/cubeSubdivided.obj">Cube</option>
		<option value="simpleMeshes/cylSimple.obj">Cylinder</option>
		<option value="simpleMeshes/cylSimpleReoriented.obj">Cylinder</option>
		<option value="9mm_cartridge/9mm_cartridge.obj">9mm_cartridge</option>
		<option value="anvil/anvil.obj">anvil</option>
		<option value="apple/apple.obj">apple</option>
		<option value="cannon_with_base/cannon_with_base.obj">cannon_with_base</option>
		<option value="cartoon_bomb/cartoon_bomb.obj">cartoon_bomb</option>
		<option value="crystal/crystal.obj">crystal</option>
	</select>

	<div class="slidecontainer"></div>
	<input type="range" min="0" max="100" value="50" id="interpolationSlider">
	<input type="range" min="0" max="100" value="50" id="gridSlider">
	<input type="range" min="0" max="100" value="50" id="whiteSlider">
	</div>
	<div>
		<input type="checkbox" id="linear" name="linear" checked />
		<label for="linear">Linear</label>
	</div>
	<div>
		<input type="checkbox" id="splitResidual" name="splitResidual" checked />
		<label for="splitResidual">Split Residual</label>
	</div>
	<select name="shortestPath" id="shortestPath">
		<option value=0>Neutral</option>
		<option value=2>Neutral Inverse</option>
		<option value=1>Long</option>
		<option value=-1>Short</option>
		<option value=4>Per Island</option>
		<label for="shortestPath">Shortest Path</label>
	</select>
	<div>
		<input type="checkbox" id="glued" name="glued" checked />
		<label for="glued">Glued</label>
		<input type="checkbox" id="gluedAverage" name="gluedAverage" checked />
		<label for="gluedAverage">Averaged</label>
	</div>
	<select name="gluedMod" id="gluedMod">
		<option value=0>PathVerse independent</option>
		<option value=1>Based on faces pathVerse</option>
		<label for="gluedMod">Glued Mod</label>
	</select>
	<div>
		<input type="checkbox" id="debugIsland" name="debugIsland"/>
		<label for="debugIsland">Debug Island</label>
	</div>
	Temporize: 
	<select name="temporize" id="temporize">
		<option value="no">No</option>
		<option value="u">By U coordinates</option>
		<option value="v">By V coordinates</option>
		<option value="insideO">Inside Out</option>
		<label for="temporize">temporize</label>
	</select>
	<label for="flightTime">Fligth Time</label>
	<input type="number" step="0.01" value="0.40" id="flightTime">




	<script type='text/javascript'>
		var Module = {}
	</script>
	<script async type="text/javascript" src="/main_wasm.js"></script>
	<script type="module" src="/main.js"></script>
</body>

</html>